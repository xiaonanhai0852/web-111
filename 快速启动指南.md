# 元器件管理系统 - 快速启动指南

## 🚀 5分钟快速启动

### 方法一：使用Docker（推荐）

**前提条件：**
- 已安装 Docker
- 已安装 Docker Compose

**启动步骤：**

```bash
# 1. 克隆或下载项目到本地
cd v1.1

# 2. 启动所有服务（首次启动需要下载镜像和编译，可能需要5-10分钟）
docker-compose up -d

# 3. 查看启动日志
docker-compose logs -f

# 4. 等待所有服务启动完成（看到 "Started SpringbootApplication" 表示后端启动成功）
```

**访问系统：**
- 前端页面：http://localhost
- 后端API：http://localhost:8080
- Swagger文档：http://localhost:8080/swagger-ui/index.html

**停止服务：**
```bash
docker-compose down
```

**完全清理（包括数据）：**
```bash
docker-compose down -v
```

---

### 方法二：本地开发环境启动

**前提条件：**
- JDK 1.8+
- Maven 3.6+
- MySQL 8.0+

**步骤1：初始化数据库**

```bash
# 登录MySQL
mysql -u root -p

# 创建数据库
CREATE DATABASE component_management DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

# 退出MySQL
exit

# 导入表结构
mysql -u root -p component_management < springboot1/src/main/resources/sql/component_management_schema.sql

# 导入示例数据（可选）
mysql -u root -p component_management < springboot1/src/main/resources/sql/sample_data.sql
```

**步骤2：配置数据库连接**

编辑 `springboot1/src/main/resources/application.properties`：

```properties
spring.datasource.url=jdbc:mysql://localhost:3306/component_management?serverTimezone=UTC&useUnicode=true&characterEncoding=utf8
spring.datasource.username=root
spring.datasource.password=你的MySQL密码
```

**步骤3：启动后端服务**

```bash
cd springboot1

# 方式1：使用Maven
mvn spring-boot:run

# 方式2：编译后运行JAR包
mvn clean package
java -jar target/springboot-0.0.1-SNAPSHOT.jar
```

**步骤4：访问前端**

直接在浏览器中打开：`前端/元器件管理.html`

或使用简单HTTP服务器：
```bash
cd 前端
python -m http.server 8000
# 访问 http://localhost:8000/元器件管理.html
```

---

## 📋 验证系统是否正常运行

### 1. 检查后端服务

访问 Swagger 文档：
```
http://localhost:8080/swagger-ui/index.html
```

如果能看到API文档页面，说明后端启动成功。

### 2. 测试API接口

在Swagger中测试 `GET /api/component/types` 接口：

1. 找到 "元器件管理接口" 分组
2. 点击 `GET /api/component/types`
3. 点击 "Try it out"
4. 点击 "Execute"
5. 查看响应，应该能看到示例数据

### 3. 测试前端页面

打开前端页面后：

1. 切换到 "库存统计" 标签
2. 点击 "刷新统计" 按钮
3. 应该能看到元器件库存列表

---

## 🎯 快速体验核心功能

### 功能1：查看库存统计

1. 打开前端页面
2. 点击 "库存统计" 标签
3. 点击 "刷新统计" 按钮
4. 查看各类元器件的库存情况

### 功能2：入库操作

1. 点击 "入库管理" 标签
2. 选择元器件类型（如：电阻 - 10KΩ）
3. 填写入库数量：100
4. 选择采购日期
5. 填写采购人姓名
6. 点击 "提交入库"
7. 看到成功提示

### 功能3：取用操作

1. 点击 "取用管理" 标签
2. 选择元器件类型（如：电阻 - 10KΩ）
3. 查看当前库存（应该显示绿色数字）
4. 填写取用数量：10
5. 填写取用人姓名
6. 填写取用目的和项目名称
7. 点击 "提交取用"
8. 看到成功提示

### 功能4：添加元器件类型（管理员）

1. 点击 "管理员功能" 标签
2. 填写元器件信息：
   - 名称：电阻
   - 型号：220KΩ（必须唯一）
   - 供应商ID：1
   - 单价：0.08
3. 点击 "添加元器件类型"
4. 看到成功提示

---

## 🔍 使用Swagger测试API

### 测试"取用元器件"接口

1. 访问 http://localhost:8080/swagger-ui/index.html
2. 找到 "元器件管理接口" → `POST /api/component/stock-out`
3. 点击 "Try it out"
4. 填写请求体：
   ```json
   {
     "componentTypeId": 1,
     "quantity": 5,
     "userId": 2,
     "userName": "测试用户",
     "purpose": "实验使用",
     "projectName": "测试项目"
   }
   ```
5. 点击 "Execute"
6. 查看响应：
   - 成功：`{"success": true, "message": "取用成功"}`
   - 失败：`{"success": false, "message": "库存不足！..."}`

### 测试"统计库存"接口

1. 找到 "统计查询接口" → `GET /api/statistics/inventory`
2. 点击 "Try it out"
3. 点击 "Execute"
4. 查看响应，应该返回所有元器件的库存统计

---

## 📊 示例数据说明

系统已预置以下示例数据：

**用户：**
- 管理员：admin@example.com / 密码：（见数据库）
- 普通用户：user1@example.com, user2@example.com

**供应商：**
- 深圳市华强电子有限公司
- 北京中电科技股份有限公司
- 上海元器件贸易公司

**元器件类型：**
- 电阻：10KΩ, 1KΩ
- 电容：100μF, 10μF
- 传感器：DHT11, DS18B20
- LED灯：红色5mm, 蓝色5mm

**初始库存：**
- 电阻 10KΩ：950个（入库1000，取用50）
- 电阻 1KΩ：470个（入库500，取用30）
- 电容 100μF：190个（入库200，取用10）
- ...

---

## ❓ 常见问题

### Q1: 后端启动失败，提示数据库连接错误

**A:** 检查以下几点：
1. MySQL是否已启动
2. 数据库名称是否正确（component_management）
3. 用户名密码是否正确
4. 端口是否正确（默认3306）

### Q2: 前端无法访问后端API

**A:** 检查：
1. 后端服务是否启动（访问 http://localhost:8080/swagger-ui/index.html）
2. 浏览器控制台是否有CORS错误
3. API地址是否正确（检查 component-management.js 中的 API_BASE_URL）

### Q3: Docker启动失败

**A:** 尝试：
```bash
# 查看日志
docker-compose logs

# 重新构建
docker-compose build --no-cache

# 清理后重启
docker-compose down -v
docker-compose up -d
```

### Q4: 取用时提示库存不足

**A:** 这是正常的业务逻辑：
1. 先查看当前库存（在取用页面会显示）
2. 确保取用数量不超过库存
3. 如果库存不足，先进行入库操作

---

## 📚 下一步

- 阅读 [README.md](README.md) 了解项目详情
- 阅读 [DDD架构说明.md](DDD架构说明.md) 了解架构设计
- 阅读 [API测试文档.md](API测试文档.md) 了解所有API接口
- 阅读 [部署文档.md](部署文档.md) 了解生产环境部署

---

## 💡 提示

- 首次启动建议使用Docker，最简单快捷
- 开发调试建议使用本地环境，方便修改代码
- 生产部署建议参考部署文档，配置安全和性能优化

---

**祝您使用愉快！** 🎉

如有问题，请查看项目文档或联系开发团队。

