<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å…ƒå™¨ä»¶ç®¡ç†ç³»ç»Ÿ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        h1 {
            color: #667eea;
            text-align: center;
            margin-bottom: 10px;
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            font-size: 14px;
        }
        
        .nav-tabs {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            border-bottom: 2px solid #eee;
        }
        
        .nav-tab {
            padding: 10px 20px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 16px;
            color: #666;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }
        
        .nav-tab.active {
            color: #667eea;
            border-bottom-color: #667eea;
        }
        
        .content-section {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            display: none !important;
        }

        .content-section.active {
            display: block !important;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            color: #333;
            font-weight: bold;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }
        
        button {
            background: #667eea;
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background 0.3s;
        }
        
        button:hover {
            background: #5568d3;
        }
        
        .table-container {
            overflow-x: auto;
            margin-top: 20px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        
        th {
            background: #f8f9fa;
            color: #333;
            font-weight: bold;
        }
        
        .alert {
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 5px;
            display: none;
        }
        
        .alert.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .alert.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        /* ç®¡ç†å‘˜ä¸“ç”¨åŠŸèƒ½æ ·å¼ */
        .admin-only {
            display: none;
        }

        body.admin .admin-only {
            display: inline-block;
        }

        .user-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
        }

        .user-badge.admin {
            background: #667eea;
            color: white;
        }

        .user-badge.user {
            background: #28a745;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <div>
                    <h1>ğŸ”§ å…ƒå™¨ä»¶ç®¡ç†ç³»ç»Ÿ</h1>
                    <p class="subtitle">åŸºäºDDDæ¶æ„çš„æ™ºèƒ½å…ƒå™¨ä»¶å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†å¹³å°</p>
                </div>
                <div style="text-align: right;">
                    <div id="user-info" style="margin-bottom: 10px;">
                        <span style="color: #667eea; font-weight: bold;" id="username-display"></span>
                        <span style="color: #999; margin-left: 10px;" id="role-display"></span>
                    </div>
                    <button onclick="logout()" style="padding: 8px 20px; background: #dc3545; color: white; border: none; border-radius: 5px; cursor: pointer;">é€€å‡ºç™»å½•</button>
                </div>
            </div>

            <div class="nav-tabs" id="nav-tabs">
                <button class="nav-tab active" onclick="showTab('stock-in', event)">å…¥åº“ç®¡ç†</button>
                <button class="nav-tab" onclick="showTab('stock-out', event)">å–ç”¨ç®¡ç†</button>
                <button class="nav-tab" onclick="showTab('statistics', event)">åº“å­˜ç»Ÿè®¡</button>
                <button class="nav-tab" onclick="showTab('stock-in-records', event)">å…¥åº“è®°å½•</button>
                <button class="nav-tab" onclick="showTab('stock-out-records', event)">å‡ºåº“è®°å½•</button>
                <button class="nav-tab admin-only" onclick="showTab('component-type', event)">å…ƒå™¨ä»¶ç±»å‹ç®¡ç†</button>
                <button class="nav-tab admin-only" onclick="showTab('supplier', event)">ä¾›åº”å•†ç®¡ç†</button>
                <button class="nav-tab admin-only" onclick="showTab('user-management', event)">ç”¨æˆ·ç®¡ç†</button>
            </div>
        </header>

        <!-- å…¥åº“ç®¡ç† -->
        <div id="stock-in" class="content-section active">
            <h2>ğŸ“¦ å…¥åº“ç®¡ç†</h2>
            <div class="alert" id="stock-in-alert"></div>

            <form id="stock-in-form">
                <div class="form-group">
                    <label>å…ƒå™¨ä»¶ç±»å‹ï¼š</label>
                    <select id="component-type-in" required>
                        <option value="">è¯·é€‰æ‹©å…ƒå™¨ä»¶ç±»å‹</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>å…¥åº“æ•°é‡ï¼š</label>
                    <input type="number" id="quantity-in" min="1" required>
                </div>

                <div class="form-group">
                    <label>é‡‡è´­æ—¥æœŸï¼š</label>
                    <input type="datetime-local" id="purchase-date" required>
                </div>

                <div class="form-group">
                    <label>é‡‡è´­äººå§“åï¼š</label>
                    <input type="text" id="purchaser-name" required>
                </div>

                <div class="form-group">
                    <label>æ‰¹æ¬¡å·ï¼š</label>
                    <input type="text" id="batch-number">
                </div>

                <div class="form-group">
                    <label>å¤‡æ³¨ï¼š</label>
                    <textarea id="remarks-in" rows="3"></textarea>
                </div>

                <button type="submit">æäº¤å…¥åº“</button>
            </form>
        </div>

        <!-- å–ç”¨ç®¡ç† -->
        <div id="stock-out" class="content-section">
            <h2>ğŸ“¤ å–ç”¨ç®¡ç†</h2>
            <div class="alert" id="stock-out-alert"></div>

            <form id="stock-out-form">
                <div class="form-group">
                    <label>å…ƒå™¨ä»¶ç±»å‹ï¼š</label>
                    <select id="component-type-out" required onchange="updateStock()">
                        <option value="">è¯·é€‰æ‹©å…ƒå™¨ä»¶ç±»å‹</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>å½“å‰åº“å­˜ï¼š<span id="current-stock" style="color: #667eea; font-size: 18px;">-</span></label>
                </div>

                <div class="form-group">
                    <label>å–ç”¨æ•°é‡ï¼š</label>
                    <input type="number" id="quantity-out" min="1" required>
                </div>

                <div class="form-group">
                    <label>å–ç”¨äººå§“åï¼š</label>
                    <input type="text" id="user-name" required>
                </div>

                <div class="form-group">
                    <label>å–ç”¨ç›®çš„ï¼š</label>
                    <input type="text" id="purpose">
                </div>

                <div class="form-group">
                    <label>é¡¹ç›®åç§°ï¼š</label>
                    <input type="text" id="project-name">
                </div>

                <div class="form-group">
                    <label>å¤‡æ³¨ï¼š</label>
                    <textarea id="remarks-out" rows="3"></textarea>
                </div>

                <button type="submit">æäº¤å–ç”¨</button>
            </form>
        </div>

        <!-- åº“å­˜ç»Ÿè®¡ -->
        <div id="statistics" class="content-section">
            <h2>ğŸ“Š åº“å­˜ç»Ÿè®¡</h2>
            <button onclick="loadStatistics()">åˆ·æ–°ç»Ÿè®¡</button>

            <div class="table-container">
                <table id="statistics-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>å…ƒå™¨ä»¶åç§°</th>
                            <th>å‹å·</th>
                            <th>å½“å‰åº“å­˜</th>
                            <th>å•ä»·</th>
                            <th>åº“å­˜ä»·å€¼</th>
                        </tr>
                    </thead>
                    <tbody id="statistics-body">
                        <tr><td colspan="6" style="text-align: center;">æš‚æ— æ•°æ®</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- å…¥åº“è®°å½• -->
        <div id="stock-in-records" class="content-section">
            <h2>ğŸ“‹ å…¥åº“è®°å½•</h2>
            <button onclick="loadStockInRecords()" style="margin-bottom: 10px;">åˆ·æ–°è®°å½•</button>

            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>å…ƒå™¨ä»¶ç±»å‹ID</th>
                            <th>æ•°é‡</th>
                            <th>é‡‡è´­æ—¥æœŸ</th>
                            <th>é‡‡è´­äºº</th>
                            <th>æ‰¹æ¬¡å·</th>
                            <th>å¤‡æ³¨</th>
                            <th>åˆ›å»ºæ—¶é—´</th>
                        </tr>
                    </thead>
                    <tbody id="stock-in-records-body">
                        <tr><td colspan="8" style="text-align: center;">æš‚æ— æ•°æ®</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- å‡ºåº“è®°å½• -->
        <div id="stock-out-records" class="content-section">
            <h2>ğŸ“¤ å‡ºåº“è®°å½•</h2>
            <button onclick="loadStockOutRecords()" style="margin-bottom: 10px;">åˆ·æ–°è®°å½•</button>

            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>å…ƒå™¨ä»¶ç±»å‹ID</th>
                            <th>æ•°é‡</th>
                            <th>å–ç”¨äºº</th>
                            <th>å–ç”¨ç›®çš„</th>
                            <th>é¡¹ç›®åç§°</th>
                            <th>å¤‡æ³¨</th>
                            <th>åˆ›å»ºæ—¶é—´</th>
                        </tr>
                    </thead>
                    <tbody id="stock-out-records-body">
                        <tr><td colspan="8" style="text-align: center;">æš‚æ— æ•°æ®</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- å…ƒå™¨ä»¶ç±»å‹ç®¡ç†ï¼ˆç®¡ç†å‘˜ï¼‰ -->
        <div id="component-type" class="content-section admin-only">
            <h2>âš™ï¸ å…ƒå™¨ä»¶ç±»å‹ç®¡ç†</h2>
            <div class="alert" id="component-type-alert"></div>

            <h3>æ·»åŠ å…ƒå™¨ä»¶ç±»å‹</h3>
            <form id="component-type-form">
                <div class="form-group">
                    <label>å…ƒå™¨ä»¶åç§°ï¼š<span style="color: red;">*</span></label>
                    <input type="text" id="component-name" required placeholder="å¦‚ï¼šç”µé˜»">
                </div>

                <div class="form-group">
                    <label>å‹å·ï¼ˆå”¯ä¸€ï¼‰ï¼š<span style="color: red;">*</span></label>
                    <input type="text" id="component-model" required placeholder="å¦‚ï¼š10KÎ©">
                </div>

                <div class="form-group">
                    <label>ä¾›åº”å•†ï¼š<span style="color: red;">*</span></label>
                    <select id="supplier-id-select" required>
                        <option value="">è¯·é€‰æ‹©ä¾›åº”å•†</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>å•ä»·ï¼š<span style="color: red;">*</span></label>
                    <input type="number" id="unit-price" step="0.01" required placeholder="0.00">
                </div>

                <div class="form-group">
                    <label>å›¾ç‰‡URLï¼š</label>
                    <input type="text" id="component-image-url" placeholder="å…ƒå™¨ä»¶å›¾ç‰‡é“¾æ¥">
                </div>

                <h4 style="margin-top: 20px; color: #667eea;">è§„æ ¼å‚æ•°ï¼ˆé€‰å¡«ï¼‰</h4>

                <div class="form-group">
                    <label>ç”µå‹å‚æ•°ï¼š</label>
                    <input type="text" id="component-voltage" placeholder="å¦‚ï¼š5V">
                </div>

                <div class="form-group">
                    <label>åŠŸç‡å‚æ•°ï¼š</label>
                    <input type="text" id="component-power" placeholder="å¦‚ï¼š0.25W">
                </div>

                <div class="form-group">
                    <label>å®¹å·®ï¼š</label>
                    <input type="text" id="component-tolerance" placeholder="å¦‚ï¼šÂ±5%">
                </div>

                <div class="form-group">
                    <label>æ¸©åº¦èŒƒå›´ï¼š</label>
                    <input type="text" id="component-temperature" placeholder="å¦‚ï¼š-40â„ƒ~85â„ƒ">
                </div>

                <div class="form-group">
                    <label>å°è£…ç±»å‹ï¼š</label>
                    <input type="text" id="component-package" placeholder="å¦‚ï¼š0805">
                </div>

                <div class="form-group">
                    <label>å…¶ä»–å‚æ•°ï¼š</label>
                    <textarea id="component-other-params" rows="3" placeholder="å…¶ä»–è§„æ ¼å‚æ•°ï¼ˆJSONæ ¼å¼ï¼‰"></textarea>
                </div>

                <button type="submit">æ·»åŠ å…ƒå™¨ä»¶ç±»å‹</button>
            </form>

            <h3 style="margin-top: 30px;">å…ƒå™¨ä»¶ç±»å‹åˆ—è¡¨</h3>
            <button onclick="loadComponentTypeList()" style="margin-bottom: 10px;">åˆ·æ–°åˆ—è¡¨</button>
            <div class="table-container" style="overflow-x: auto;">
                <table>
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>åç§°</th>
                            <th>å‹å·</th>
                            <th>ä¾›åº”å•†ID</th>
                            <th>å•ä»·</th>
                            <th>å›¾ç‰‡</th>
                            <th>ç”µå‹</th>
                            <th>åŠŸç‡</th>
                            <th>å®¹å·®</th>
                            <th>æ¸©åº¦</th>
                            <th>å°è£…</th>
                            <th>å…¶ä»–å‚æ•°</th>
                            <th>æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody id="component-type-list">
                        <tr><td colspan="13" style="text-align: center;">æš‚æ— æ•°æ®</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- ä¾›åº”å•†ç®¡ç†ï¼ˆç®¡ç†å‘˜ï¼‰ -->
        <div id="supplier" class="content-section admin-only">
            <h2>ğŸ¢ ä¾›åº”å•†ç®¡ç†</h2>
            <div class="alert" id="supplier-alert"></div>

            <h3>æ·»åŠ ä¾›åº”å•†</h3>
            <form id="supplier-form">
                <div class="form-group">
                    <label>ä¾›åº”å•†åç§°ï¼š<span style="color: red;">*</span></label>
                    <input type="text" id="supplier-name" required placeholder="å¦‚ï¼šæ·±åœ³å¸‚åå¼ºç”µå­æœ‰é™å…¬å¸">
                </div>

                <div class="form-group">
                    <label>è”ç³»ç”µè¯ï¼š<span style="color: red;">*</span></label>
                    <input type="text" id="supplier-phone" required placeholder="å¦‚ï¼š0755-12345678">
                </div>

                <div class="form-group">
                    <label>é‚®ç®±ï¼š</label>
                    <input type="email" id="supplier-email" placeholder="å¦‚ï¼šsupplier@example.com">
                </div>

                <div class="form-group">
                    <label>è”ç³»äººï¼š</label>
                    <input type="text" id="supplier-contact" placeholder="å¦‚ï¼šå¼ ç»ç†">
                </div>

                <div class="form-group">
                    <label>çœä»½ï¼š</label>
                    <input type="text" id="supplier-province" placeholder="å¦‚ï¼šå¹¿ä¸œçœ">
                </div>

                <div class="form-group">
                    <label>åŸå¸‚ï¼š</label>
                    <input type="text" id="supplier-city" placeholder="å¦‚ï¼šæ·±åœ³å¸‚">
                </div>

                <div class="form-group">
                    <label>åŒºå¿ï¼š</label>
                    <input type="text" id="supplier-district" placeholder="å¦‚ï¼šç¦ç”°åŒº">
                </div>

                <div class="form-group">
                    <label>è¡—é“åœ°å€ï¼š</label>
                    <input type="text" id="supplier-street" placeholder="å¦‚ï¼šåå¼ºåŒ—è·¯1å·">
                </div>

                <div class="form-group">
                    <label>é‚®ç¼–ï¼š</label>
                    <input type="text" id="supplier-postal-code" placeholder="å¦‚ï¼š518000">
                </div>

                <button type="submit">æ·»åŠ ä¾›åº”å•†</button>
            </form>

            <h3 style="margin-top: 30px;">ä¾›åº”å•†åˆ—è¡¨</h3>
            <button onclick="loadSuppliers()">åˆ·æ–°åˆ—è¡¨</button>
            <div class="table-container" style="overflow-x: auto;">
                <table>
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>åç§°</th>
                            <th>ç”µè¯</th>
                            <th>é‚®ç®±</th>
                            <th>è”ç³»äºº</th>
                            <th>çœä»½</th>
                            <th>åŸå¸‚</th>
                            <th>åŒºå¿</th>
                            <th>è¡—é“åœ°å€</th>
                            <th>é‚®ç¼–</th>
                            <th>æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody id="supplier-list">
                        <tr><td colspan="11" style="text-align: center;">æš‚æ— æ•°æ®</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- ç”¨æˆ·ç®¡ç†ï¼ˆç®¡ç†å‘˜ï¼‰ -->
        <div id="user-management" class="content-section admin-only">
            <h2>ğŸ‘¥ ç”¨æˆ·ç®¡ç†</h2>
            <div class="alert" id="user-alert"></div>

            <h3>æ·»åŠ ç”¨æˆ·</h3>
            <form id="user-form">
                <div class="form-group">
                    <label>å­¦å·/å·¥å·ï¼š</label>
                    <input type="text" id="user-student-id" required>
                </div>

                <div class="form-group">
                    <label>çœŸå®å§“åï¼š</label>
                    <input type="text" id="user-real-name" required>
                </div>

                <div class="form-group">
                    <label>ç”¨æˆ·åï¼š</label>
                    <input type="text" id="user-username" required>
                </div>

                <div class="form-group">
                    <label>å¯†ç ï¼š</label>
                    <input type="password" id="user-password" required minlength="6" placeholder="è‡³å°‘6ä½">
                </div>

                <div class="form-group">
                    <label>é‚®ç®±ï¼š</label>
                    <input type="email" id="user-email" required>
                </div>

                <div class="form-group">
                    <label>æ‰‹æœºå·ï¼š</label>
                    <input type="text" id="user-phone" required pattern="[0-9]{11}" placeholder="11ä½æ‰‹æœºå·">
                </div>

                <div class="form-group">
                    <label>è§’è‰²ï¼š</label>
                    <select id="user-role" required>
                        <option value="USER">æ™®é€šç”¨æˆ·</option>
                        <option value="ADMIN">ç®¡ç†å‘˜</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>éƒ¨é—¨ï¼š</label>
                    <input type="text" id="user-department">
                </div>

                <button type="submit">æ·»åŠ ç”¨æˆ·</button>
            </form>

            <h3 style="margin-top: 30px;">ç”¨æˆ·åˆ—è¡¨</h3>
            <button onclick="loadUsers()" style="margin-bottom: 10px;">åˆ·æ–°åˆ—è¡¨</button>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>å­¦å·/å·¥å·</th>
                            <th>ç”¨æˆ·å</th>
                            <th>å§“å</th>
                            <th>é‚®ç®±</th>
                            <th>æ‰‹æœº</th>
                            <th>è§’è‰²</th>
                            <th>éƒ¨é—¨</th>
                            <th>æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody id="user-list">
                        <tr><td colspan="9" style="text-align: center;">æš‚æ— æ•°æ®</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script src="js/component-management.js"></script>
</body>
</html>

