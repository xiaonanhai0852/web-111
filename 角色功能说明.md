# 元器件管理系统 - 角色功能说明

## 一、角色定义

系统支持两种角色：
- **管理员（ADMIN）**：拥有所有权限，可以管理用户、元器件类型、供应商
- **普通用户（USER）**：只能进行入库、取用和查询操作

## 二、功能权限矩阵

| 功能模块 | 管理员 | 普通用户 | 说明 |
|---------|--------|---------|------|
| **入库管理** | ✅ | ✅ | 选择已有类型进行入库 |
| **取用管理** | ✅ | ✅ | 取用元器件，自动检查库存 |
| **库存统计** | ✅ | ✅ | 查看库存统计和历史记录 |
| **元器件类型管理** | ✅ | ❌ | 创建、编辑、删除元器件类型 |
| **供应商管理** | ✅ | ❌ | 对供应商信息的增删改查 |
| **用户管理** | ✅ | ❌ | 对普通用户账号的增删改查 |

## 三、管理员功能详解

### 3.1 用户信息维护

**功能描述：**
- 添加新用户（设置学号/工号、姓名、邮箱、手机、角色、部门）
- 查看用户列表
- 删除用户
- 修改用户信息

**操作路径：**
1. 登录管理员账号
2. 点击"用户管理"标签
3. 填写用户信息并提交

**演示账号：**
- 用户名：admin
- 密码：admin123

### 3.2 元器件类型管理

**功能描述：**
- 创建新的元器件类型（如"电阻-10KΩ"）
- 设置元器件名称、型号（唯一）、供应商、单价
- 查看所有元器件类型
- 删除元器件类型

**操作路径：**
1. 登录管理员账号
2. 点击"元器件类型管理"标签
3. 填写元器件信息并提交

**重要说明：**
- 型号必须唯一，不能重复
- 普通用户不能创建新类型，只能选择已有类型

**示例数据：**
```
名称：电阻
型号：10KΩ
供应商：深圳市华强电子有限公司
单价：0.05
```

### 3.3 供应商管理

**功能描述：**
- 添加新供应商
- 设置供应商名称、联系电话、邮箱、联系人
- 查看供应商列表
- 删除供应商

**操作路径：**
1. 登录管理员账号
2. 点击"供应商管理"标签
3. 填写供应商信息并提交

**示例数据：**
```
名称：深圳市华强电子有限公司
电话：0755-12345678
邮箱：huaqiang@example.com
联系人：张经理
```

## 四、普通用户功能详解

### 4.1 添加元器件入库

**功能描述：**
- 通过下拉菜单选择已有的元器件类型
- 填写入库数量、采购日期、采购人
- 可选填写批次号和备注

**操作路径：**
1. 登录普通用户账号
2. 点击"入库管理"标签
3. 选择元器件类型
4. 填写数量、日期等信息
5. 点击"提交入库"

**演示账号：**
- 用户名：user
- 密码：user123

**重要限制：**
- ❌ 普通用户不能创建新的元器件类型
- ✅ 只能从下拉菜单中选择已有类型

**示例操作：**
```
元器件类型：电阻 - 10KΩ
入库数量：100
采购日期：2024-01-25 10:00
采购人姓名：张三
批次号：BATCH20240125001
备注：补充库存
```

### 4.2 取用元器件

**功能描述：**
- 选择元器件类型和型号
- 系统自动显示当前库存
- 填写取用数量（系统自动检查库存是否充足）
- 填写取用目的、项目名称等信息

**操作路径：**
1. 登录普通用户账号
2. 点击"取用管理"标签
3. 选择元器件类型（系统自动显示库存）
4. 填写取用数量和相关信息
5. 点击"提交取用"

**库存检查规则：**
- ✅ 库存充足：允许取用，自动扣减库存
- ❌ 库存不足：拒绝取用，提示当前库存和需要数量

**示例操作：**
```
元器件类型：电阻 - 10KΩ
当前库存：950个
取用数量：10个
取用人姓名：李四
取用目的：实验使用
项目名称：智能温控系统
备注：用于电路板焊接
```

### 4.3 统计查询

**功能描述：**
- 按元器件类型统计库存总量
- 按具体型号查询当前库存数量
- 查询元器件的取用历史记录

**操作路径：**
1. 点击"库存统计"标签
2. 点击"刷新统计"按钮
3. 查看各类元器件的库存情况

**统计信息包括：**
- 元器件ID
- 元器件名称
- 型号
- 当前库存（动态计算）
- 单价
- 库存价值

**库存计算公式：**
```
当前库存 = SUM(入库数量) - SUM(取用数量)
```

## 五、登录和权限控制

### 5.1 登录流程

1. 访问 `登录.html`
2. 选择角色（管理员/普通用户）
3. 输入用户名和密码
4. 点击"登录"按钮
5. 系统验证成功后跳转到管理页面

### 5.2 演示账号

| 角色 | 用户名 | 密码 | 权限 |
|------|--------|------|------|
| 管理员 | admin | admin123 | 所有功能 |
| 普通用户 | user | user123 | 入库、取用、查询 |

### 5.3 权限控制机制

**前端权限控制：**
- 根据登录角色显示/隐藏功能标签
- 管理员可以看到所有标签
- 普通用户只能看到：入库管理、取用管理、库存统计

**后端权限控制：**
- 所有API接口都应该验证用户权限
- 管理员专用接口拒绝普通用户访问
- 使用JWT或Session进行身份验证

## 六、业务规则

### 6.1 元器件类型规则

1. **型号唯一性**：每个型号在系统中必须唯一
2. **创建权限**：只有管理员可以创建新类型
3. **删除限制**：删除类型前应检查是否有库存记录

### 6.2 库存管理规则

1. **库存计算**：基于流水记录动态计算，不直接存储
2. **库存检查**：取用前必须检查库存是否充足
3. **数据一致性**：所有入库和取用操作都记录流水

### 6.3 取用规则

1. **库存充足性检查**：
   ```
   if (取用数量 > 当前库存) {
       拒绝取用，提示库存不足
   } else {
       允许取用，创建取用记录
   }
   ```

2. **必填信息**：
   - 元器件类型ID
   - 取用数量
   - 取用人ID和姓名

3. **可选信息**：
   - 取用目的
   - 项目名称
   - 备注

## 七、使用场景示例

### 场景1：管理员创建新的元器件类型

```
1. 管理员登录系统
2. 点击"元器件类型管理"
3. 填写信息：
   - 名称：电容
   - 型号：100μF
   - 供应商：深圳市华强电子有限公司
   - 单价：0.15
4. 点击"添加元器件类型"
5. 系统提示"添加成功"
```

### 场景2：普通用户入库操作

```
1. 普通用户登录系统
2. 点击"入库管理"
3. 从下拉菜单选择：电容 - 100μF
4. 填写数量：200
5. 选择采购日期：2024-01-25
6. 填写采购人：张三
7. 点击"提交入库"
8. 系统提示"入库成功"
```

### 场景3：普通用户取用操作

```
1. 普通用户登录系统
2. 点击"取用管理"
3. 选择元器件：电容 - 100μF
4. 系统显示当前库存：200个
5. 填写取用数量：10个
6. 填写取用人：李四
7. 填写取用目的：实验使用
8. 点击"提交取用"
9. 系统检查库存充足，提示"取用成功"
10. 库存自动扣减为：190个
```

### 场景4：库存不足的情况

```
1. 用户选择元器件：电容 - 100μF
2. 当前库存：5个
3. 填写取用数量：10个
4. 点击"提交取用"
5. 系统提示："库存不足！当前库存：5，需要：10"
6. 取用失败，库存不变
```

## 八、注意事项

### 8.1 管理员注意事项

1. **谨慎删除**：删除元器件类型或供应商前，确认没有关联数据
2. **型号管理**：确保型号的唯一性和规范性
3. **用户管理**：定期审查用户账号，删除不活跃账号

### 8.2 普通用户注意事项

1. **不能创建类型**：如需新类型，请联系管理员
2. **准确填写**：入库和取用信息要准确，便于追溯
3. **库存检查**：取用前查看库存，避免超量取用

### 8.3 系统使用建议

1. **定期备份**：管理员应定期备份数据库
2. **库存盘点**：定期进行库存盘点，确保数据准确
3. **权限审查**：定期审查用户权限，确保安全

## 九、快速开始

### 管理员快速开始

```bash
1. 访问 http://localhost/登录.html
2. 选择"管理员"角色
3. 输入：admin / admin123
4. 点击"登录"
5. 开始管理系统
```

### 普通用户快速开始

```bash
1. 访问 http://localhost/登录.html
2. 选择"普通用户"角色
3. 输入：user / user123
4. 点击"登录"
5. 开始使用系统
```

---

**文档版本：** v1.0  
**最后更新：** 2024-01-25  
**维护团队：** 元器件管理系统开发团队

